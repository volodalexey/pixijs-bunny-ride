(()=>{var e,t={7279:(e,t,i)=>{"use strict";i.r(t)},6752:(e,t,i)=>{"use strict";i(7279);const n=i(9678),a=i(3266);(async function(){const e=document.querySelector(".loader");null!=e&&e.parentElement?.removeChild(e),await n.SceneManager.initialize();const t=new a.LoaderScene;await n.SceneManager.changeScene({newScene:t}),await t.loadAll(),document.addEventListener("keydown",(e=>{console.log(e.code)}))})().catch((function(e){console.error(e);const t=document.querySelector(".error-message");null!=t&&(t.classList.remove("hidden"),t.innerText=e?.message??String(e));const i=document.querySelector(".error-stack");null!=i&&(i.classList.remove("hidden"),i.innerText=e?.stack??"");const n=document.querySelector("canvas");null!=n&&n.parentElement?.removeChild(n)}))},3266:function(e,t,i){"use strict";var n,a=this&&this.__classPrivateFieldSet||function(e,t,i,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,i):a?a.value=i:t.set(e,i),i},o=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderScene=t.manifest=void 0;const r=i(8687),s=i(6424);t.manifest={bundles:[{name:"initial-bundle",assets:{spritesheet:"assets/spritesheets/atlas.json",font:"assets/fonts/Zubilo_Black.woff2"}}]},t.LoaderScene=class{constructor(){this.name="loader",n.set(this,void 0),this.handleProgress=e=>{o(this,n,"f").downloadProgress(e)},a(this,n,new s.LoaderSceneView,"f")}get view(){return o(this,n,"f")}async loadAll(){o(this,n,"f").downloadStarted(),await r.Assets.init({manifest:t.manifest}),await r.Assets.loadBundle(t.manifest.bundles[0].name,this.handleProgress)}handleResize(e){o(this,n,"f").handleResize(e)}handleMounted(){}handleUpdate(){o(this,n,"f").updateTitle()}},n=new WeakMap},6424:function(e,t,i){"use strict";var n,a,o,r,s=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,i,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,i):a?a.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderSceneView=void 0;const d=i(8687),c=i(9962),h=i(9678);class u extends d.Container{constructor(){super(),n.set(this,void 0),a.set(this,void 0),o.set(this,void 0),r.set(this,void 0),this.downloadStarted=()=>{s(this,o,"f").width=u.barOptions.initWidth},this.downloadProgress=e=>{s(this,o,"f").width=(u.barOptions.width-2*u.barOptions.borderThick)*e,this.handleResize({viewWidth:h.SceneManager.width,viewHeight:h.SceneManager.height}),this.updateTitle()},this.setup(),this.draw()}setup(){const e=new d.Text(u.titleText,{...u.titleOptions});this.addChild(e),l(this,n,e,"f");const t=new d.Container;this.addChild(t),t.position.y=1.2*u.titleOptions.fontSize,l(this,a,t,"f");const i=new d.Graphics;t.addChild(i),l(this,r,i,"f");const s=new d.Graphics;t.addChild(s),l(this,o,s,"f")}draw(){const{barOptions:e}=u,t=s(this,o,"f"),i=s(this,r,"f");i.beginFill(e.borderColor),i.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),i.endFill(),t.beginFill(e.fillColor),t.position.set(e.borderThick,e.borderThick),t.drawRoundedRect(0,0,e.width-2*e.borderThick,e.height-2*e.borderThick,e.borderRadius),t.endFill()}updateTitle(e){e??(e=Array(Math.ceil(3*Math.random())).fill(".").join("")),s(this,n,"f").text=u.titleText+e}handleResize({viewWidth:e,viewHeight:t}){const i=e,o=t,r=u.barOptions.width,l=s(this,n,"f").height+u.barOptions.height;this.updateTitle(""),c.Resize.handleResize({view:s(this,a,"f"),availableWidth:i,availableHeight:o,totalWidth:r,totalHeight:l,lockX:!0,lockY:!0}),c.Resize.handleResize({view:s(this,n,"f"),availableWidth:s(this,a,"f").width,availableHeight:o,totalWidth:s(this,n,"f").width,totalHeight:l,lockWidth:!0,lockHeight:!0,lockY:!0}),c.Resize.handleResize({view:this,availableWidth:i,availableHeight:o,totalWidth:r,totalHeight:l,lockWidth:!0,lockHeight:!0})}}t.LoaderSceneView=u,n=new WeakMap,a=new WeakMap,o=new WeakMap,r=new WeakMap,u.barOptions={initWidth:10,width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},u.titleText="Загрузка",u.titleOptions={fontFamily:"Zubilo Black",fontSize:30,fill:52224,stroke:16777215,strokeThickness:1,letterSpacing:5}},9678:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SceneManager=void 0;const n=i(8687),a=i(6645);class o{static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){const e=new n.Application({autoDensity:!0,resolution:window.devicePixelRatio??1,width:o.width,height:o.height,resizeTo:window});document.body.appendChild(e.view),a.logApp.enabled&&((0,a.logApp)("window.__PIXI_APP__ initialized!"),window.__PIXI_APP__=e),o.app=e,o.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",o.resizeDeBounce),o.app.ticker.add(o.updateHandler)}static async changeScene({name:e,newScene:t,initialResize:i=!0}){if(null!=t?o.scenes.has(t.name)||o.scenes.set(t.name,t):null!=e&&(t=o.scenes.get(e)),null==t)throw new Error("Unable to detect new scene");null!=o.currentScene&&(o.app.stage.removeChild(o.currentScene.view),"function"==typeof o.currentScene.unmountedHandler&&o.currentScene.unmountedHandler()),o.currentScene=t,o.app.stage.addChild(o.currentScene.view),i&&o.resizeHandler(),"function"==typeof t.mountedHandler&&t.mountedHandler()}static resizeDeBounce(){o.cancelScheduledResizeHandler(),o.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(o.resizeTimeoutId)}static scheduleResizeHandler(){o.resizeTimeoutId=window.setTimeout((()=>{o.cancelScheduledResizeHandler(),o.resizeHandler()}),o.resizeTimeout)}static resizeHandler(){o.currentScene?.handleResize({viewWidth:o.width,viewHeight:o.height})}static updateHandler(){o.currentScene?.handleUpdate(o.app.ticker.deltaMS)}}t.SceneManager=o,o.resizeTimeout=300,o.scenes=new Map},9962:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resize=void 0;const n=i(6645);t.Resize=class{static handleResize({view:e,availableWidth:t,availableHeight:i,totalWidth:a,totalHeight:o,logName:r="",lockX:s=!1,lockY:l=!1,lockWidth:d=!1,lockHeight:c=!1}){let h,u;if(t>=a&&i>=o)h=a,u=o,(0,n.logLayout)(`${r} Spacing aw=${t} ow=${h} ah=${i} oh=${u}`);else{let e=1;o>=a?(e=i/o,e*a>t&&(e=t/a),(0,n.logLayout)(`${r} By height (sc=${e})`)):(e=t/a,(0,n.logLayout)(`${r} By width (sc=${e})`),e*o>i&&(e=i/o)),h=Math.floor(a*e),u=Math.floor(o*e),(0,n.logLayout)(`${r} Scaling aw=${t} (ow=${h}) ah=${i} (oh=${u})`)}const w=t>h?(t-h)/2:0,f=i>u?(i-u)/2:0;s||(e.x=w,(0,n.logLayout)(`${r} set x=${w}`)),d||(e.width=h,(0,n.logLayout)(`${r} set width=${h}`)),l||(e.y=f,(0,n.logLayout)(`${r} set y=${f}`)),c||(e.height=u,(0,n.logLayout)(`${r} set height=${u}`))}}},6645:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logLayout=t.logLoader=t.logApp=void 0;const a=n(i(1227));function o(e){return`bunny-ride-${e}`}t.logApp=(0,a.default)(o("app")),t.logLoader=(0,a.default)(o("loader")),t.logLayout=(0,a.default)(o("layout"))},4654:()=>{}},i={};function n(e){var a=i[e];if(void 0!==a)return a.exports;var o=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,e=[],n.O=(t,i,a,o)=>{if(!i){var r=1/0;for(c=0;c<e.length;c++){for(var[i,a,o]=e[c],s=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((e=>n.O[e](i[l])))?i.splice(l--,1):(s=!1,o<r&&(r=o));if(s){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var a,o,[r,s,l]=i,d=0;if(r.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var c=l(n)}for(t&&t(i);d<r.length;d++)o=r[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},i=self.webpackChunkpixijs_bunny_ride=self.webpackChunkpixijs_bunny_ride||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=n.O(void 0,[736],(()=>n(6752)));a=n.O(a)})();