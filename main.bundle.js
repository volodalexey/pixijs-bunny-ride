(()=>{var e,t={7279:(e,t,i)=>{"use strict";i.r(t)},6752:(e,t,i)=>{"use strict";i(7279);const s=i(9678),o=i(3266),n=i(916);(async function(){const e=document.querySelector(".loader");null!=e&&e.parentElement?.removeChild(e),await s.SceneManager.initialize();const t=new o.LoaderScene;await s.SceneManager.changeScene({newScene:t}),await t.loadAll();const i=new n.GameScene;await s.SceneManager.changeScene({newScene:i}),document.addEventListener("keydown",(e=>{console.log(e.code)}))})().catch((function(e){console.error(e);const t=document.querySelector(".error-message");null!=t&&(t.classList.remove("hidden"),t.innerText=e?.message??String(e));const i=document.querySelector(".error-stack");null!=i&&(i.classList.remove("hidden"),i.innerText=e?.stack??"");const s=document.querySelector("canvas");null!=s&&s.parentElement?.removeChild(s)}))},9474:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconButton=void 0;const s=i(8687),o=i(3084);class n extends s.Container{constructor(e){super(),this.pressed=!1,null!=e.pressed&&(this.pressed=e.pressed),this.externalPressed=e.externalPressed,this.eventMode="static",this.cursor="pointer",this.onClick=e.onClick,this.setup(e),this.updateState(!1,this.pressed)}setup({width:e,height:t,textureNames:i}){const n=s.Assets.get("spritesheet"),{textures:a}=n;this.textures={active:a[i.active],hover:a[i.hover],press:a[i.press]},this.sprites={active:new s.Sprite(this.textures.active),hover:new s.Sprite(this.textures.hover),press:new s.Sprite(this.textures.press)},this.addChild(this.sprites.active),this.addChild(this.sprites.hover),this.addChild(this.sprites.press),o.Scale.handleWidthHeight(this,e,t),this.setupEventLesteners()}setupEventLesteners(){this.on("pointerdown",(e=>{this.updateState(!1,!0),"function"==typeof this.onClick&&this.onClick(e)})),this.on("pointerover",(()=>{this.updateState(!0,!1)})),this.on("pointerup",(()=>{this.updateState(!1,!1)})),this.on("pointerleave",(()=>{this.updateState(!1,!1)}))}hideAll(){this.children.forEach((e=>{e.visible=!1}))}idleState(){this.hideAll(),this.sprites.active.visible=!0}hoverState(){this.hideAll(),this.sprites.hover.visible=!0}pressedState(){this.hideAll(),this.sprites.press.visible=!0}updateState(e=!1,t=!1){null!=this.externalPressed&&(t=this.externalPressed),t?this.pressedState():e?this.hoverState():this.idleState()}}t.IconButton=n},6168:function(e,t,i){"use strict";var s,o=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},n=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.ControlsBar=void 0;const a=i(9757);t.ControlsBar=class{constructor(e){s.set(this,void 0),this.audio=e.audio,this.setup()}get view(){return o(this,s,"f")}setup(){n(this,s,new a.ControlsBarView,"f"),o(this,s,"f").buttonFullscreen.on("pointerdown",(()=>{if(document.fullscreenElement)document.exitFullscreen();else{const e=document.querySelector("canvas");null!=e&&e.requestFullscreen().catch((e=>{console.error(`Error attempting to enable fullscreen mode: ${e.message} (${e.name})`)}))}this.audio.playClick()})),o(this,s,"f").buttonSoundOn.on("pointerdown",(()=>{this.audio.stopMusic(),this.audio.playClick()})),o(this,s,"f").buttonSoundOff.on("pointerdown",(()=>{this.audio.playMusic(),this.audio.playClick()})),o(this,s,"f").buttonPause.on("pointerdown",(()=>{this.audio.playClick()}))}handleResize(e){o(this,s,"f").handleResize(e)}},s=new WeakMap},9757:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlsBarView=void 0;const s=i(8687),o=i(9474);class n extends s.Container{constructor(){super(),this.setup()}setup(){this.buttonFullscreen=new o.IconButton({width:80,textureNames:{active:"btn_fullscreen_active.png",hover:"btn_fullscreen_hover.png",press:"btn_fullscreen_press.png"}}),this.buttonPause=new o.IconButton({width:80,textureNames:{active:"btn_pause_active.png",hover:"btn_pause_hover.png",press:"btn_pause_press.png"}}),this.buttonSoundOff=new o.IconButton({width:80,textureNames:{active:"btn_sound_0_active.png",hover:"btn_sound_0_hover.png",press:"btn_sound_0_press.png"}}),this.buttonSoundOff.on("pointerdown",(()=>{this.buttonSoundOn.visible=!0,this.buttonSoundOff.visible=!1})),this.buttonSoundOn=new o.IconButton({pressed:!0,width:80,textureNames:{active:"btn_sound_1_active.png",hover:"btn_sound_1_hover.png",press:"btn_sound_1_press.png"}}),this.buttonSoundOn.on("pointerdown",(()=>{this.buttonSoundOn.visible=!1,this.buttonSoundOff.visible=!0})),this.buttonSoundOn.visible=!1,this.addChild(this.buttonFullscreen),this.addChild(this.buttonSoundOff),this.addChild(this.buttonSoundOn),this.addChild(this.buttonPause)}handleResize({viewWidth:e}){const{gap:t}=n.options;this.buttonFullscreen.position.x=0,this.buttonFullscreen.position.y=t,this.buttonSoundOff.position.x=this.buttonSoundOn.position.x=this.buttonFullscreen.position.x+this.buttonFullscreen.width+t,this.buttonSoundOff.position.y=this.buttonSoundOn.position.y=t,this.buttonPause.position.x=this.buttonSoundOff.position.x+this.buttonSoundOff.width+t,this.buttonPause.position.y=t,this.position.x=e-this.width-t}}t.ControlsBarView=n,n.options={gap:10}},1611:function(e,t,i){"use strict";var s,o,n,a,r,h,d,l,c=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i},u=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const p=i(9902),w=i(6789);t.Game=class{constructor({pixiApp:e,view:t}){s.add(this),o.set(this,void 0),n.set(this,void 0),a.set(this,void 0),r.set(this,void 0),h.set(this,!1),d.set(this,!1),this.handlePause=()=>{c(this,d,!u(this,d,"f"),"f"),u(this,r,"f").controlsBar.view.buttonPause.externalPressed=u(this,d,"f")},this.handleStart=()=>{c(this,h,!1,"f"),c(this,d,!1,"f"),u(this,r,"f").hideIntro()},c(this,o,e,"f"),c(this,n,new w.GameAudio,"f"),c(this,a,t,"f"),c(this,r,new p.UI({pixiApp:e,audio:u(this,n,"f")}),"f"),u(this,a,"f").addChild(u(this,r,"f")),u(this,r,"f").controlsBar.view.buttonPause.on("pointerdown",this.handlePause),u(this,r,"f").introModal.playButton.on("pointerdown",this.handleStart)}handleResize(e){u(this,r,"f").handleResize(e)}handleUpdate(){u(this,s,"m",l).call(this),u(this,r,"f").handleUpdate()}},o=new WeakMap,n=new WeakMap,a=new WeakMap,r=new WeakMap,h=new WeakMap,d=new WeakMap,s=new WeakSet,l=function(){u(this,h,"f")}},7039:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntroModal=void 0;const s=i(8687),o=i(2724),n=i(3553),a=i(9474),r=i(8535);class h extends o.Modal{constructor(e){super({...e,title:"Твои рекорды:"}),this.introOptions={recordGap:10,loginButtonGap:40,userNameGap:40,userNamePadding:40,actionsGap:40,record:{align:"center",fontFamily:n.FONT_FAMILY,fontSize:1.1*n.FONT_SIZE_XXL,fill:n.COLOR_GREEN,stroke:n.COLOR_BLUE,strokeThickness:5,letterSpacing:5}},this.setupContent()}getRecordText(e=0){return`Рекорд:\n${e}`}setupContent(){const e=new s.Text(this.getRecordText(),{...this.introOptions.record});e.anchor.x=.5,this.addChild(e),this.recordText=e,this.loginButton=new a.IconButton({textureNames:{active:"login_button_active.png",hover:"login_button_hover.png",press:"login_button_press.png"}}),this.addChild(this.loginButton),this.userName=new r.TextInput({textureName:"user_name_bar.png",text:"Test username"}),this.addChild(this.userName),this.leadboardButton=new a.IconButton({textureNames:{active:"leadboard_button_active.png",hover:"leadboard_button_hover.png",press:"leadboard_button_press.png"}}),this.addChild(this.leadboardButton),this.playButton=new a.IconButton({textureNames:{active:"play_button_active.png",hover:"play_button_hover.png",press:"play_button_press.png"}}),this.addChild(this.playButton)}handleResize(e){super.handleResize(e);const t=this.sprites.infoPlate.width/2;this.recordText.position.x=t,this.recordText.position.y=this.sprites.headerInfoPlate.y+this.sprites.headerInfoPlate.height+this.introOptions.recordGap,this.loginButton.position.x=t-this.loginButton.width/2,this.loginButton.position.y=this.recordText.position.y+this.recordText.height+this.introOptions.loginButtonGap,this.userName.handleResize(e),this.userName.position.x=t-this.userName.width/2,this.userName.position.y=this.loginButton.position.y+this.loginButton.height+this.introOptions.userNameGap,this.leadboardButton.position.x=t-this.leadboardButton.width,this.leadboardButton.position.y=this.userName.position.y+this.userName.height+this.introOptions.actionsGap,this.playButton.position.x=t,this.playButton.position.y=this.userName.position.y+this.userName.height+this.introOptions.actionsGap}}t.IntroModal=h},103:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LeadboardModal=void 0;const s=i(8687),o=i(2724),n=i(3553),a=i(9474);var r;!function(e){e[e.allTime=0]="allTime",e[e.month=1]="month",e[e.week=2]="week"}(r||(r={}));class h extends o.Modal{constructor(e){super({...e,title:"Таблица рекордов:"}),this.timeSpan=r.allTime,this.leadboardOptions={timeSpanGap:20,okButtonGap:40,timeSpan:{align:"center",fontFamily:n.FONT_FAMILY,fontSize:n.FONT_SIZE_XXL,fill:n.COLOR_ORANGE,stroke:n.COLOR_BLUE,strokeThickness:5,letterSpacing:5}},this.setupContent()}getTimeSpanText(){switch(this.timeSpan){case r.allTime:return"Все время";case r.month:return"Месяц";case r.week:return"Неделя"}}setupContent(){const e=new s.Text(this.getTimeSpanText(),{...this.leadboardOptions.timeSpan});e.anchor.x=.5,this.addChild(e),this.timeSpanText=e,this.okButton=new a.IconButton({textureNames:{active:"ok_button_active.png",hover:"ok_button_hover.png",press:"ok_button_press.png"}}),this.addChild(this.okButton)}handleResize(e){super.handleResize(e);const t=this.sprites.infoPlate.width/2;this.timeSpanText.position.x=t,this.timeSpanText.position.y=this.sprites.headerInfoPlate.y+this.sprites.headerInfoPlate.height+this.leadboardOptions.timeSpanGap,this.okButton.position.x=t-this.okButton.width,this.okButton.position.y=this.timeSpanText.position.y+this.timeSpanText.height+this.leadboardOptions.okButtonGap}}t.LeadboardModal=h},2724:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;const s=i(8687),o=i(3084),n=i(3553);class a extends s.Container{static prepareTextures(){const e=s.Assets.get("spritesheet"),{textures:t}=e;null==a.textures&&(a.textures={infoPlate:t["info_plate_big.png"],headerInfoPlate:t["header_info_plate.png"]})}constructor(e){a.prepareTextures(),super(),this.options={headerInfo:{gap:5},header:{fontFamily:n.FONT_FAMILY,fontSize:n.FONT_SIZE_XXL,fill:n.COLOR_BLUE,stroke:16777215,strokeThickness:1}},this.setup(e),null!=e.visible&&(this.visible=e.visible)}setup({width:e,height:t,title:i}){this.sprites={infoPlate:new s.Sprite(a.textures.infoPlate),headerInfoPlate:new s.Sprite(a.textures.headerInfoPlate)},this.addChild(this.sprites.infoPlate),this.addChild(this.sprites.headerInfoPlate);const n=new s.Text(i,{...this.options.header});n.anchor.x=.5,this.headerText=n,o.Scale.handleWidthHeight(this,e,t),this.addChild(n)}showModal(){this.visible=!0}hideModal(){this.visible=!1}handleResize(e){const{headerInfoPlate:t,infoPlate:i}=this.sprites;t.position.x=(i.width-t.width)/2,t.position.y=this.options.headerInfo.gap,this.headerText.position.x=i.width/2}}t.Modal=a},213:function(e,t,i){"use strict";var s,o=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},n=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBar=void 0;const a=i(9678),r=i(9634);t.StatusBar=class{constructor(){s.set(this,void 0),this.setup()}get view(){return o(this,s,"f")}setup(){n(this,s,new r.StatusBarView,"f")}setCollectedCoinsCount(e){o(this,s,"f").coinsCollectedText.text=`${e}`,this.handleResize(a.SceneManager.intoResizeParams())}handleResize(e){o(this,s,"f").handleResize(e)}},s=new WeakMap},9634:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBarView=void 0;const s=i(8687),o=i(3553);class n extends s.Container{constructor(){super(),this.setup()}setup(){const e=s.Assets.get("spritesheet"),{textures:t}=e;n.textures={coinScorePlate:t["coin_score_plate.png"],collectCoinIcon:t["collect_coin_icon.png"]};const i=new s.Sprite(n.textures.coinScorePlate);i.height=44,i.scale.x=i.scale.y,this.addChild(i),this.coinScorePlate=i;const o=new s.Text("0",{...n.differencesFoundOptions});o.anchor.set(.5),this.addChild(o),this.coinsCollectedText=o;const a=new s.Sprite(n.textures.collectCoinIcon);a.width=66,a.scale.y=a.scale.x,this.addChild(a),this.collectCoinIcon=a}handleResize(e){const{gap:t}=n.options;this.collectCoinIcon.position.x=t,this.collectCoinIcon.position.y=t,this.coinScorePlate.position.x=this.collectCoinIcon.position.x+this.collectCoinIcon.width-2*t,this.coinScorePlate.position.y=this.collectCoinIcon.position.y+this.collectCoinIcon.height/2-this.coinScorePlate.height/2,this.coinsCollectedText.position.x=this.coinScorePlate.position.x+this.coinScorePlate.width/2,this.coinsCollectedText.position.y=this.coinScorePlate.position.y+this.coinScorePlate.height/2+5*this.coinScorePlate.scale.y}}t.StatusBarView=n,n.options={gap:10},n.differencesFoundOptions={fontFamily:o.FONT_FAMILY,fontSize:o.FONT_SIZE_REGULAR,fill:o.COLOR_WHITE}},8535:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextInput=void 0;const s=i(8687),o=i(3553);class n extends s.Container{constructor(e){super(),this.options={gapTop:20,gapLeft:40,text:{align:"center",fontFamily:o.FONT_FAMILY,fontSize:o.FONT_SIZE_XXL,fill:o.COLOR_WHITE}},this.setup(e)}setup({textureName:e,text:t,fontSize:i,fontColor:o}){const n=s.Assets.get("spritesheet"),{textures:a}=n;this.backgroundSprite=new s.Sprite(a[e]),this.addChild(this.backgroundSprite);const r=new s.Text(t,{...this.options.text,fontSize:i??this.options.text.fontSize,fill:o??this.options.text.fill});this.addChild(r),this.inputText=r}handleResize(e){this.inputText.position.x=this.options.gapLeft,this.inputText.position.y=this.options.gapTop}}t.TextInput=n},9902:function(e,t,i){"use strict";var s,o,n=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.UI=void 0;const r=i(8687),h=i(213),d=i(6168),l=i(7039),c=i(9962),u=i(103);class p extends r.Container{constructor(e){super(),s.set(this,void 0),o.set(this,9/16),this.options={gap:10,statusBarWidth:0,statusBarHeight:0,controlsBarWidth:0,controlsBarHeight:0,introModalWidth:500,introModalHeight:0,leadboardModalWidth:500,leadboardModalHeight:0},this.switchToLeaderboard=()=>{this.hideIntro(),this.leadboardModal.visible=!0},this.switchToInto=()=>{this.introModal.visible=!0,this.leadboardModal.visible=!1},this.setup(e)}setup({audio:e}){const t=new h.StatusBar;this.addChild(t.view),n(this,s,t,"f"),this.options.statusBarWidth=t.view.width,this.options.statusBarHeight=t.view.height;const i=new d.ControlsBar({audio:e});this.addChild(i.view),this.controlsBar=i,this.options.controlsBarWidth=i.view.width,this.options.controlsBarHeight=i.view.height;const o=new l.IntroModal({width:this.options.introModalWidth});this.addChild(o),this.introModal=o,o.leadboardButton.on("pointerdown",this.switchToLeaderboard),this.options.introModalHeight=o.height;const a=new u.LeadboardModal({width:this.options.leadboardModalWidth,visible:!1});this.addChild(a),this.leadboardModal=a,a.okButton.on("pointerdown",this.switchToInto),this.options.leadboardModalHeight=a.height}setCollectedCoinsCount(e){a(this,s,"f").setCollectedCoinsCount(e)}handleResize(e){a(this,s,"f").handleResize(e),this.controlsBar.handleResize(e),this.introModal.handleResize(e),this.leadboardModal.handleResize(e),c.Resize.handleResize({view:this.introModal,availableWidth:e.viewWidth,availableHeight:e.viewHeight,contentWidth:this.options.introModalWidth,contentHeight:this.options.introModalHeight}),c.Resize.handleResize({view:this.leadboardModal,availableWidth:e.viewWidth,availableHeight:e.viewHeight,contentWidth:this.options.leadboardModalWidth,contentHeight:this.options.leadboardModalHeight})}hideIntro(){this.introModal.visible=!1}handleUpdate(){}}t.UI=p,s=new WeakMap,o=new WeakMap},916:function(e,t,i){"use strict";var s,o=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i},n=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;const a=i(1611),r=i(9678),h=i(6111);t.GameScene=class{constructor(){this.name="game",s.set(this,void 0),o(this,s,new h.GameSceneView,"f"),this.setup()}get view(){return n(this,s,"f")}setup(){this.game=new a.Game({pixiApp:r.SceneManager.app,view:n(this,s,"f")})}handleResize(e){this.game.handleResize(e)}handleUpdate(){this.game.handleUpdate()}mountedHandler(){}},s=new WeakMap},6111:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameSceneView=void 0;const s=i(8687);class o extends s.Container{constructor(){super()}handleResize(){}}t.GameSceneView=o},3266:function(e,t,i){"use strict";var s,o=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i},n=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderScene=t.manifest=void 0;const a=i(8687),r=i(6424);t.manifest={bundles:[{name:"initial-bundle",assets:{spritesheet:"assets/spritesheets/atlas.json",font:"assets/fonts/Zubilo_Black.woff2"}}]},t.LoaderScene=class{constructor(){this.name="loader",s.set(this,void 0),this.handleProgress=e=>{n(this,s,"f").downloadProgress(e)},o(this,s,new r.LoaderSceneView,"f")}get view(){return n(this,s,"f")}async loadAll(){n(this,s,"f").downloadStarted(),await a.Assets.init({manifest:t.manifest}),await a.Assets.loadBundle(t.manifest.bundles[0].name,this.handleProgress)}handleResize(e){n(this,s,"f").handleResize(e)}handleMounted(){}handleUpdate(){n(this,s,"f").updateTitle()}},s=new WeakMap},6424:function(e,t,i){"use strict";var s,o,n,a,r=this&&this.__classPrivateFieldGet||function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},h=this&&this.__classPrivateFieldSet||function(e,t,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,i):o?o.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderSceneView=void 0;const d=i(8687),l=i(9962),c=i(9678),u=i(3553);class p extends d.Container{constructor(){super(),s.set(this,void 0),o.set(this,void 0),n.set(this,void 0),a.set(this,void 0),this.downloadStarted=()=>{r(this,n,"f").width=p.barOptions.initWidth},this.downloadProgress=e=>{r(this,n,"f").width=(p.barOptions.width-2*p.barOptions.borderThick)*e,this.handleResize({viewWidth:c.SceneManager.width,viewHeight:c.SceneManager.height}),this.updateTitle()},this.setup(),this.draw()}setup(){const e=new d.Text(p.titleText,{...p.titleOptions});this.addChild(e),h(this,s,e,"f");const t=new d.Container;this.addChild(t),t.position.y=1.2*Number(p.titleOptions.fontSize),h(this,o,t,"f");const i=new d.Graphics;t.addChild(i),h(this,a,i,"f");const r=new d.Graphics;t.addChild(r),h(this,n,r,"f")}draw(){const{barOptions:e}=p,t=r(this,n,"f"),i=r(this,a,"f");i.beginFill(e.borderColor),i.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),i.endFill(),t.beginFill(e.fillColor),t.position.set(e.borderThick,e.borderThick),t.drawRoundedRect(0,0,e.width-2*e.borderThick,e.height-2*e.borderThick,e.borderRadius),t.endFill()}updateTitle(e){e??(e=Array(Math.ceil(3*Math.random())).fill(".").join("")),r(this,s,"f").text=p.titleText+e}handleResize({viewWidth:e,viewHeight:t}){const i=e,n=t,a=p.barOptions.width,h=r(this,s,"f").height+p.barOptions.height;this.updateTitle(""),l.Resize.handleResize({view:r(this,o,"f"),availableWidth:i,availableHeight:n,contentWidth:a,contentHeight:h,lockX:!0,lockY:!0}),l.Resize.handleResize({view:r(this,s,"f"),availableWidth:r(this,o,"f").width,availableHeight:n,contentWidth:r(this,s,"f").width,contentHeight:h,lockWidth:!0,lockHeight:!0,lockY:!0}),l.Resize.handleResize({view:this,availableWidth:i,availableHeight:n,contentWidth:a,contentHeight:h,lockWidth:!0,lockHeight:!0})}}t.LoaderSceneView=p,s=new WeakMap,o=new WeakMap,n=new WeakMap,a=new WeakMap,p.barOptions={initWidth:10,width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},p.titleText="Загрузка",p.titleOptions={fontFamily:u.FONT_FAMILY,fontSize:u.FONT_SIZE_XL,fill:u.COLOR_GREEN,stroke:16777215,strokeThickness:1,letterSpacing:5}},9678:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SceneManager=void 0;const s=i(8687),o=i(6645);class n{static get width(){return window.innerWidth}static get height(){return window.innerHeight}static intoResizeParams(){return{viewWidth:this.width,viewHeight:this.height}}static async initialize(){const e=new s.Application({autoDensity:!0,resolution:window.devicePixelRatio??1,width:n.width,height:n.height,resizeTo:window});document.body.appendChild(e.view),o.logApp.enabled&&((0,o.logApp)("window.__PIXI_APP__ initialized!"),window.__PIXI_APP__=e),n.app=e,n.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",n.resizeDeBounce),n.app.ticker.add(n.updateHandler)}static async changeScene({name:e,newScene:t,initialResize:i=!0}){if(null!=t?n.scenes.has(t.name)||n.scenes.set(t.name,t):null!=e&&(t=n.scenes.get(e)),null==t)throw new Error("Unable to detect new scene");null!=n.currentScene&&(n.app.stage.removeChild(n.currentScene.view),"function"==typeof n.currentScene.unmountedHandler&&n.currentScene.unmountedHandler()),n.currentScene=t,n.app.stage.addChild(n.currentScene.view),i&&n.resizeHandler(),"function"==typeof t.mountedHandler&&t.mountedHandler()}static resizeDeBounce(){n.cancelScheduledResizeHandler(),n.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(n.resizeTimeoutId)}static scheduleResizeHandler(){n.resizeTimeoutId=window.setTimeout((()=>{n.cancelScheduledResizeHandler(),n.resizeHandler()}),n.resizeTimeout)}static resizeHandler(){n.currentScene?.handleResize(n.intoResizeParams())}static updateHandler(){n.currentScene?.handleUpdate(n.app.ticker.deltaMS)}}t.SceneManager=n,n.resizeTimeout=300,n.scenes=new Map},6789:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GameAudio=void 0;const o=i(1766),n=s(i(7568)),a=s(i(7197));t.GameAudio=class{constructor(){this.buttonPress=new o.Howl({src:n.default,volume:.5}),this.music=new o.Howl({src:a.default,volume:.5})}getSounds(e){switch(e){case"button-press":return[this.buttonPress];case"music":return[this.music]}return[]}stop(e=[]){e.map((e=>this.getSounds(e))).forEach((e=>{e.forEach((e=>e.stop()))}))}play({name:e,volume:t,stop:i=[]}){const s=this.getSounds(e);if(s.length>0){this.stop(i);const e=s[Math.floor(Math.random()*s.length)];null!=t&&t>=0&&t<=1&&e.volume(t),e.play()}}playClick(){this.play({name:"button-press",stop:[]})}playMusic(){this.play({name:"music",stop:[]})}stopMusic(){this.stop(["music"])}}},9962:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resize=void 0;const s=i(6645);t.Resize=class{static handleResize({view:e,availableWidth:t,availableHeight:i,contentWidth:o=e.width,contentHeight:n=e.height,logName:a="",lockX:r=!1,lockY:h=!1,lockWidth:d=!1,lockHeight:l=!1}){let c,u;if(t>=o&&i>=n)c=o,u=n,(0,s.logLayout)(`${a} Spacing aw=${t} ow=${c} ah=${i} oh=${u}`);else{let e=1;n>=o?(e=i/n,e*o>t&&(e=t/o),(0,s.logLayout)(`${a} By height (sc=${e})`)):(e=t/o,(0,s.logLayout)(`${a} By width (sc=${e})`),e*n>i&&(e=i/n)),c=Math.floor(o*e),u=Math.floor(n*e),(0,s.logLayout)(`${a} Scaling aw=${t} (ow=${c}) ah=${i} (oh=${u})`)}const p=t>c?(t-c)/2:0,w=i>u?(i-u)/2:0;r||(e.x=p,(0,s.logLayout)(`${a} set x=${p}`)),d||(e.width=c,(0,s.logLayout)(`${a} set width=${c}`)),h||(e.y=w,(0,s.logLayout)(`${a} set y=${w}`)),l||(e.height=u,(0,s.logLayout)(`${a} set height=${u}`))}}},3084:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scale=void 0;const s=i(6645);t.Scale=class{static handleWidthHeight(e,t,i){const o=Number.isFinite(t),n=Number.isFinite(i);(0,s.logWidthHeight)(`isWidth=${o} isHeight=${n}`),o&&n?((0,s.logWidthHeight)(`>> w & h ${e.width} ${e.height} sx=${e.scale.x} sy=${e.scale.y}`),e.width=t,e.height=i,(0,s.logWidthHeight)(`w & h ${e.width} ${e.height} sx=${e.scale.x} sy=${e.scale.y}`)):o&&!n?((0,s.logWidthHeight)(`>> w !h ${e.width} ${e.height} sx=${e.scale.x} sy=${e.scale.y}`),e.width=t,e.scale.y=e.scale.x,(0,s.logWidthHeight)(`w !h ${e.width} ${e.height} sx=${e.scale.x} sy=${e.scale.y}`)):!o&&n&&((0,s.logWidthHeight)(`>> !w h ${e.width} ${e.height} sx=${e.scale.x} sy=${e.scale.y}`),e.height=i,e.scale.x=e.scale.y,(0,s.logWidthHeight)(`!w h ${e.width} ${e.height} sx=${e.scale.x} sy=${e.scale.y}`))}}},3553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FONT_SIZE_REGULAR=t.FONT_SIZE_XXL=t.FONT_SIZE_XL=t.COLOR_ORANGE=t.COLOR_BLUE=t.COLOR_WHITE=t.COLOR_GREEN=t.FONT_FAMILY=void 0,t.FONT_FAMILY="Zubilo Black",t.COLOR_GREEN=52224,t.COLOR_WHITE=16777215,t.COLOR_BLUE=15729,t.COLOR_ORANGE=16738305,t.FONT_SIZE_XL=30,t.FONT_SIZE_XXL=60,t.FONT_SIZE_REGULAR=30},6645:function(e,t,i){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logWidthHeight=t.logLayout=t.logLoader=t.logApp=void 0;const o=s(i(1227));function n(e){return`bunny-ride-${e}`}t.logApp=(0,o.default)(n("app")),t.logLoader=(0,o.default)(n("loader")),t.logLayout=(0,o.default)(n("layout")),t.logWidthHeight=(0,o.default)(n("width-height"))},7568:(e,t,i)=>{"use strict";e.exports=i.p+"./assets/audio/button_press.mp3"},7197:(e,t,i)=>{"use strict";e.exports=i.p+"./assets/audio/music.mp3"},4654:()=>{}},i={};function s(e){var o=i[e];if(void 0!==o)return o.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,e=[],s.O=(t,i,o,n)=>{if(!i){var a=1/0;for(l=0;l<e.length;l++){for(var[i,o,n]=e[l],r=!0,h=0;h<i.length;h++)(!1&n||a>=n)&&Object.keys(s.O).every((e=>s.O[e](i[h])))?i.splice(h--,1):(r=!1,n<a&&(a=n));if(r){e.splice(l--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[i,o,n]},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&!e;)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var o,n,[a,r,h]=i,d=0;if(a.some((t=>0!==e[t]))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(h)var l=h(s)}for(t&&t(i);d<a.length;d++)n=a[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(l)},i=self.webpackChunkpixijs_bunny_ride=self.webpackChunkpixijs_bunny_ride||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=s.O(void 0,[736],(()=>s(6752)));o=s.O(o)})();